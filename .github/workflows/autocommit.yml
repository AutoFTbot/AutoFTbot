name: Commit Otomatis

on:
  schedule:
    - cron: "0 * * * *" # tiap jam
  push:
    branches:
      - main

jobs:
  auto-commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Tarik parobahan panganyarna
        run: git pull origin main --rebase || echo "Teu aya parobahan pikeun ditarik"

      - name: Update file LAST_UPDATED
        run: |
          echo "=== Ngarobah File LAST_UPDATED ==="
          echo "Dirobah terakhir: $(date -u)" > LAST_UPDATED
          cat LAST_UPDATED

      - name: Konpigurasikeun Git
        run: |
          git config --global user.name "AutoFTbot"
          git config --global user.email "agin@aginvpn.com"

      - name: Commit parobahan
        run: |
          git add .
          messages=(
            "chore(bot): ğŸ¦„ unicorns nuju gawe magic"
            "chore(bot): ğŸ‘½ alien geus nyatujuan"
            "chore(bot): ğŸ¥’ pickles keur bungah"
            "chore(bot): ğŸ• pizza jadi sumber tanaga"
            "chore(bot): ğŸ™ octopus keur multitasking"
            "chore(bot): ğŸš€ ngaleupaskeun perbaikan"
            "chore(bot): ğŸ§Ÿâ€â™‚ï¸ zombies geus benerkeun bug"
            "chore(bot): ğŸ¦– dinosaurus geus beulah bug"
            "chore(bot): ğŸŒ kaselip dina kulit cau"
            "chore(bot): ğŸ¤¡ keur ngigel jeung kode"
            "chore(bot): ğŸ›¸ diculik ku committers"
            "chore(bot): ğŸ¦¥ lelet tapi pasti push"
            "chore(bot): ğŸ§™â€â™‚ï¸ mantra tukang sihir dipakÃ©"
            "chore(bot): ğŸ‰ naga ngabakar bug"
            "chore(bot): ğŸ¥³ pesta commit, hayu babarengan!"
          )

          message=${messages[$RANDOM % ${#messages[@]}]}
          git commit -m "$message" || echo "Teu aya parobahan pikeun di-commit"

      - name: Push parobahan
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Debug log
        run: |
          git status
          git log -n 3

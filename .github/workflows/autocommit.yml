name: Commit Otomatis Lucu (Basa Sunda)

on:
  schedule:
    - cron: "0 * * * *" # tiap jam
  push:
    branches:
      - main

jobs:
  auto-commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Tarik parobahan panganyarna
        run: git pull origin main --rebase || echo "Teu aya parobahan pikeun ditarik"

      - name: Update file LAST_UPDATED
        run: |
          echo "=== Ngarobah File LAST_UPDATED ==="
          echo "Dirobah terakhir: $(date -u)" > LAST_UPDATED
          cat LAST_UPDATED

      - name: Konpigurasikeun Git
        run: |
          git config --global user.name "AutoFTbot"
          git config --global user.email "agin@aginvpn.com"

      - name: Commit parobahan
        run: |
          git add .
          messages=(
            "AutoFTbot: ğŸ” hayu nguseup, kode geus beres"
            "AutoFTbot: ğŸ¦¥ bodo amat, asal bisa jalan"
            "AutoFTbot: ğŸœ ngeunahna mah di debug sakedapan"
            "AutoFTbot: ğŸ¦„ magic magic magic, teu apal naon ieu"
            "AutoFTbot: ğŸ’ keur ngagantung, kode rada lelet"
            "AutoFTbot: ğŸ¸ ngadenge kodena jang, kudu diolah deui"
            "AutoFTbot: ğŸ” hayu sarerea, urang push babarengan"
            "AutoFTbot: ğŸ© commit sambil ngopi, aman"
            "AutoFTbot: ğŸ¦¥ asa di hammock, tapi kudu push"
            "AutoFTbot: ğŸ· leutik tapi kuat, commit na"
            "AutoFTbot: ğŸ‰ dahar semangka bari ngoding"
            "AutoFTbot: ğŸ” hayu gaskeun, bug geus kabur"
            "AutoFTbot: ğŸ kode uler, licin pisan"
            "AutoFTbot: ğŸ¦„ asa keur di negeri dongeng, tapi commit jalan"
          )

          message=${messages[$RANDOM % ${#messages[@]}]}
          git commit -m "$message" || echo "Teu aya parobahan pikeun di-commit"

      - name: Push parobahan
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Debug log
        run: |
          git status
          git log -n 3
